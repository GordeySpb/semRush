(this.webpackJsonpsr=this.webpackJsonpsr||[]).push([[0],{10:function(e,t,n){e.exports={item:"friend_item__23SXs",imgWrapper:"friend_imgWrapper__OuQx5",img:"friend_img__-HOGD"}},11:function(e,t,n){e.exports={wrapper:"search_wrapper__2fJQ8",input:"search_input__3HbAL"}},18:function(e,t,n){e.exports={button:"button_button__2gI6N"}},19:function(e,t,n){e.exports={auth:"auth_auth__3BetV"}},20:function(e,t,n){e.exports={app:"app_app__2IZN8"}},24:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),s=n.n(c),i=n(38),o=n(4),u=n(2),l=n.n(u),m="connected",p="unknown",f=function(e,t){return t.v="5.103",new Promise((function(n,a){window.VK.api(e,t,(function(e){e.error?a(e.error):n(e.response)}))}))},_=n(18),d=n.n(_),E=function(e){var t=e.children,n=e.onClick;return r.a.createElement("button",{className:d.a.button,onClick:n},t)},h=n(19),v=n.n(h),g=function(e){var t=e.history,n=Object(a.useCallback)((function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.awrap(new Promise((function(e,t){window.VK.Auth.login((function(n){var a=n.session,r=n.status;a?e(r):t(new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))}))})));case 3:e.sent===m&&t.push("/user"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),null,null,[[0,7]])}));return r.a.createElement("div",{className:v.a.auth},r.a.createElement(E,{onClick:n},"Login"))},w=n(9),N=n(5),b=n.n(N),C=function(e){var t=e.img,n=e.name,a=e.lastName,c=e.count;return r.a.createElement("div",{className:b.a.container},r.a.createElement("div",{className:b.a.imgContainer},r.a.createElement("div",{className:b.a.imgWrapper},r.a.createElement("img",{className:b.a.img,src:t,alt:"Avatar"}))),r.a.createElement("div",{className:b.a.info},r.a.createElement("p",{className:b.a.name},"".concat(n," ").concat(a)),r.a.createElement("p",null,"Friends count: ".concat(c))))};C.defaultProps={img:"",name:"",lastName:"",count:0};var y=n(10),x=n.n(y),F=function(e){var t=e.id,n=e.avatar,a=e.name,c=e.lastName;return r.a.createElement("li",{className:x.a.item,id:t},r.a.createElement("div",{className:x.a.imgWrapper},r.a.createElement("img",{className:x.a.img,src:n,alt:"avatar"})),r.a.createElement("div",null,"".concat(a," ").concat(c)))},k=n(11),O=n.n(k),S=function(e){var t=e.onChange,n=e.onClick,a=e.value;return r.a.createElement("div",{className:O.a.wrapper},r.a.createElement("input",{className:O.a.input,placeholder:"Type name...",type:"text",onChange:t,value:a}),r.a.createElement(E,{onClick:n},"Search"))},T=n(6);function j(e,t){var n=t.type,a=t.payload;switch(n){case"SET_USER":return Object(T.a)({},e,{user:a.user});case"SET_FRIENDS":return Object(T.a)({},e,{friends:a.friends});case"SET_FILTERED":return Object(T.a)({},e,{filtered:a.filtered});case"SET_FETCHING":return Object(T.a)({},e,{isFetching:a.isFetching});case"SET_COUNT":return Object(T.a)({},e,{count:a.count});default:throw new Error}}var W=function(){var e=function(){var e=Object(a.useReducer)(j,{user:{},friends:[],filtered:[],isFetching:!1,count:null}),t=Object(w.a)(e,2),n=t[0],r=t[1];return{state:n,setUser:function(e){return r({type:"SET_USER",payload:{user:e}})},setFriends:function(e){return r({type:"SET_FRIENDS",payload:{friends:e}})},setFiltered:function(e){return r({type:"SET_FILTERED",payload:{filtered:e}})},setFetching:function(e){return r({type:"SET_FETCHING",payload:{isFetching:e}})},setCount:function(e){return r({type:"SET_COUNT",payload:{count:e}})}}}(),t=e.state,n=e.setUser,r=e.setFriends,c=e.setFiltered,s=e.setFetching,i=e.setCount;return Object(a.useEffect)((function(){!function(){var e,t,a,o;l.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,s(!0),u.next=4,l.a.awrap(f("users.get",{fields:"photo_200"}));case 4:return e=u.sent,u.next=7,l.a.awrap(f("friends.get",{fields:"first_name, last_name, photo_100"}));case 7:t=u.sent,a=t.items,o=t.count,n(e[0]),r(a),c(a),i(o),s(!1),u.next=20;break;case 17:throw u.prev=17,u.t0=u.catch(0),new Error(u.t0);case 20:case"end":return u.stop()}}),null,null,[[0,17]])}()}),[]),{state:t,setFriends:r}},I=n(7),H=n.n(I),L=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(w.a)(n,2),s=c[0],i=c[1],o=W(),u=o.setFriends,m=o.state,f=m.filtered,_=m.user,d=m.count,h=m.isFetching,v=m.friends,g=Object(a.useCallback)((function(e){var t=e.target.value;i(t)}),[i]),N=Object(a.useCallback)((function(){var e=f.filter((function(e){return e.first_name.toLowerCase().includes(s.toLowerCase())}));u(e)}),[f,s,u]),b=Object(a.useCallback)((function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(new Promise((function(e,t){window.VK.Auth.logout((function(t){var n=t.status;e(n)}))})));case 2:e.sent===p&&t.push("/");case 4:case"end":return e.stop()}}))}),[t]);return r.a.createElement("div",{className:H.a.container},!h&&r.a.createElement("div",null,r.a.createElement(C,{img:_.photo_200,name:_.first_name,lastName:_.last_name,count:d}),r.a.createElement(S,{onChange:g,onClick:N,value:s}),r.a.createElement("div",{className:H.a.listWrapper},r.a.createElement("ul",{className:H.a.list},!!v.length&&v.map((function(e){return r.a.createElement(F,{key:e.id,id:e.id,avatar:e.photo_100,name:e.first_name,lastName:e.last_name})})))),r.a.createElement("div",{className:H.a.logoutWrapper},r.a.createElement(E,{onClick:b},"Logout"))))},R=n(20),U=n.n(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(35),n(36);var A=Object(o.a)();s.a.render(r.a.createElement(i.b,{history:A},r.a.createElement((function(){return r.a.createElement("div",{className:U.a.app},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:g}),r.a.createElement(i.a,{exact:!0,path:"/user",component:L})))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,t,n){e.exports={container:"profile_container__3EU-7",imgContainer:"profile_imgContainer__HPJD8",img:"profile_img__2KHRq",info:"profile_info__1J_FZ",name:"profile_name__1CGr1"}},7:function(e,t,n){e.exports={container:"user_container__KLBc1",listWrapper:"user_listWrapper__3pGHA",list:"user_list__Nd4PZ",logoutWrapper:"user_logoutWrapper__1A8rH"}}},[[24,1,2]]]);
//# sourceMappingURL=main.86b4c20f.chunk.js.map