(this.webpackJsonpsr=this.webpackJsonpsr||[]).push([[0],{11:function(e,t,a){e.exports={container:"user_container__KLBc1",listWrapper:"user_listWrapper__3pGHA",list:"user_list__Nd4PZ",logoutWrapper:"user_logoutWrapper__1A8rH"}},13:function(e,t,a){e.exports={item:"friend_item__23SXs",imgWrapper:"friend_imgWrapper__OuQx5",img:"friend_img__-HOGD"}},16:function(e,t,a){e.exports={wrapper:"search_wrapper__2fJQ8",input:"search_input__3HbAL"}},22:function(e,t,a){e.exports={button:"button_button__2gI6N"}},23:function(e,t,a){e.exports={auth:"auth_auth__3BetV"}},24:function(e,t,a){e.exports={app:"app_app__2IZN8"}},27:function(e,t,a){e.exports=a(40)},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),i=a(15),o=a(2),u=a(6),l=a(4),m=a.n(l),p="connected",f="unknown",_=function(e,t){return t.v="5.103",new Promise((function(a,n){window.VK.api(e,t,(function(e){e.error?n(e.error):a(e.response)}))}))},d=a(22),E=a.n(d),h=function(e){var t=e.children,a=e.onClick;return r.a.createElement("button",{className:E.a.button,onClick:a},t)},v=a(23),g=a.n(v),w=function(e){var t=e.history,a=Object(n.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.awrap(new Promise((function(e,t){window.VK.Auth.login((function(a){var n=a.session,r=a.status;n?e(r):t(new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))}))})));case 3:e.sent===p&&t.push("/user"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),null,null,[[0,7]])}));return r.a.createElement("div",{className:g.a.auth},r.a.createElement(h,{onClick:a},"Login"))},N=a(12),b=a(8),C=a.n(b),y=function(e){var t=e.img,a=e.name,n=e.lastName,c=e.count;return r.a.createElement("div",{className:C.a.container},r.a.createElement("div",{className:C.a.imgContainer},r.a.createElement("div",{className:C.a.imgWrapper},r.a.createElement("img",{className:C.a.img,src:t,alt:"Avatar"}))),r.a.createElement("div",{className:C.a.info},r.a.createElement("p",{className:C.a.name},"".concat(a," ").concat(n)),r.a.createElement("p",null,"Friends count: ".concat(c))))};y.defaultProps={img:"",name:"",lastName:"",count:0};var x=a(13),F=a.n(x),k=function(e){var t=e.id,a=e.avatar,n=e.name,c=e.lastName;return r.a.createElement("li",{className:F.a.item,id:t},r.a.createElement("div",{className:F.a.imgWrapper},r.a.createElement("img",{className:F.a.img,src:a,alt:"avatar"})),r.a.createElement("div",null,"".concat(n," ").concat(c)))},O=a(16),S=a.n(O),T=function(e){var t=e.onChange,a=e.onClick,n=e.value;return r.a.createElement("div",{className:S.a.wrapper},r.a.createElement("input",{className:S.a.input,placeholder:"Type name...",type:"text",onChange:t,value:n}),r.a.createElement(h,{onClick:a},"Search"))},j=a(9);function W(e,t){var a=t.type,n=t.payload;switch(a){case"SET_USER":return Object(j.a)({},e,{user:n.user});case"SET_FRIENDS":return Object(j.a)({},e,{friends:n.friends});case"SET_FILTERED":return Object(j.a)({},e,{filtered:n.filtered});case"SET_FETCHING":return Object(j.a)({},e,{isFetching:n.isFetching});case"SET_COUNT":return Object(j.a)({},e,{count:n.count});default:throw new Error}}var I=function(){var e=function(){var e=Object(n.useReducer)(W,{user:{},friends:[],filtered:[],isFetching:!1,count:null}),t=Object(N.a)(e,2),a=t[0],r=t[1];return{state:a,setUser:function(e){return r({type:"SET_USER",payload:{user:e}})},setFriends:function(e){return r({type:"SET_FRIENDS",payload:{friends:e}})},setFiltered:function(e){return r({type:"SET_FILTERED",payload:{filtered:e}})},setFetching:function(e){return r({type:"SET_FETCHING",payload:{isFetching:e}})},setCount:function(e){return r({type:"SET_COUNT",payload:{count:e}})}}}(),t=e.state,a=e.setUser,r=e.setFriends,c=e.setFiltered,s=e.setFetching,i=e.setCount;return Object(n.useEffect)((function(){!function(){var e,t,n,o;m.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,s(!0),u.next=4,m.a.awrap(_("users.get",{fields:"photo_200"}));case 4:return e=u.sent,u.next=7,m.a.awrap(_("friends.get",{fields:"first_name, last_name, photo_100"}));case 7:t=u.sent,n=t.items,o=t.count,a(e[0]),r(n),c(n),i(o),s(!1),u.next=20;break;case 17:throw u.prev=17,u.t0=u.catch(0),new Error(u.t0);case 20:case"end":return u.stop()}}),null,null,[[0,17]])}()}),[]),{state:t,setFriends:r}},H=a(11),L=a.n(H),R=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(N.a)(a,2),s=c[0],i=c[1],o=I(),u=o.setFriends,l=o.state,p=l.filtered,_=l.user,d=l.count,E=l.isFetching,v=l.friends,g=Object(n.useCallback)((function(e){var t=e.target.value;i(t)}),[i]),w=Object(n.useCallback)((function(){var e=p.filter((function(e){return e.first_name.toLowerCase().includes(s.toLowerCase())}));u(e)}),[p,s,u]),b=Object(n.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(new Promise((function(e,t){window.VK.Auth.logout((function(t){var a=t.status;e(a)}))})));case 2:e.sent===f&&t.push("/");case 4:case"end":return e.stop()}}))}),[t]);return r.a.createElement("div",{className:L.a.container},!E&&r.a.createElement("div",null,r.a.createElement(y,{img:_.photo_200,name:_.first_name,lastName:_.last_name,count:d}),r.a.createElement(T,{onChange:g,onClick:w,value:s}),r.a.createElement("div",{className:L.a.listWrapper},r.a.createElement("ul",{className:L.a.list},!!v.length&&v.map((function(e){return r.a.createElement(k,{key:e.id,id:e.id,avatar:e.photo_100,name:e.first_name,lastName:e.last_name})})))),r.a.createElement("div",{className:L.a.logoutWrapper},r.a.createElement(h,{onClick:b},"Logout"))))},U=a(24),A=a.n(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(38),a(39);var D=Object(o.a)();s.a.render(r.a.createElement(i.a,{basename:"/",history:D},r.a.createElement((function(){return r.a.createElement("div",{className:A.a.app},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:w}),r.a.createElement(u.a,{exact:!0,path:"/user",component:R})))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){e.exports={container:"profile_container__3EU-7",imgContainer:"profile_imgContainer__HPJD8",img:"profile_img__2KHRq",info:"profile_info__1J_FZ",name:"profile_name__1CGr1"}}},[[27,1,2]]]);
//# sourceMappingURL=main.11681236.chunk.js.map